
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Answers to Pandas Exercises &#8212; LeDataSciFi-2021</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/fin377_specialformatting.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">LeDataSciFi-2021</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  About the class
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../about/objectives.html">
   Objectives
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/outcomes.html">
   Outcomes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/about_us.html">
   About us + office hours
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/structure_and_policies.html">
   Course structure + policies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/gradeoverview.html">
   Grading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/acknowledgments.html">
   Gratitude
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Schedule, tips, resources
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../about/schedule.html">
   Dashboard, key links, schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/resources.html">
   Help + resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../about/tips.html">
   Tips and hacks
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Assignments and participation
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../assignments/howto_do.html">
   How to start and turn in assignments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assignments/howto_review.html">
   How to do your peer reviews
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Textbook
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../01/00_Getting_Started.html">
   1. Motivation and Getting Started
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../01/01_Motivation.html">
     1.1. Motivation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/02_Setup.html">
     1.2. Set up
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/03_github.html">
     1.3. Github Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/04_Markdown.html">
     1.4. Markdown basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/05_jupyterlab.html">
     1.5. Jupyter Lab Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/06_python.html">
     1.6. Python Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/07_debugging.html">
     1.7. Debugging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/07a_errors.html">
     1.8. Errors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/08_libraries.html">
     1.9. Installing libraries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/09_gitignore.html">
     1.10. Gitignore Files
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../02/10_Golden_1.html">
   2. Good Analysis Practices
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_2.html">
     2.1. A case study of bad research
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_3.html">
     2.2. The golden rules
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_4.html">
     2.3. Good data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_5.html">
     2.4. When to write functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_6.html">
     2.5. Reorganizing the bad research folder
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/10_Golden_7.html">
     2.6. Filepaths
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="00_Data_Wrangling_Intro.html">
   3. Wrangling with Data
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="01_Numpy.html">
     3.1. Numpy
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="01a_NumpyCS.html">
       3.1.1. Numpy + Scientific Computing
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="01b_NumpyBasics.html">
       3.1.2. A (Very) Short Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="01c_NumpyPractice.html">
       3.1.3. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="01d_NumpyResources.html">
       3.1.4. More Resources
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="01d_NumpyResources.html#survey">
       3.1.5. Survey
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
   <li class="toctree-l2 collapsible-parent">
    <a class="reference internal" href="02a_pandasIntro.html">
     3.2. Pandas
    </a>
    <ul class="collapse-ul">
     <li class="toctree-l3">
      <a class="reference internal" href="02a_pandasTips.html">
       3.2.1. Tips
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02b_pandasVocab.html">
       3.2.2. Vocab
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02c_commonFcns.html">
       3.2.3. Common Functions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02d_temp.html">
       3.2.4. Temp. vs Perm. Objects
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02e_eda_golden.html">
       3.2.5. Golden Rules + EDA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02f_chains.html">
       3.2.6. Pandas Chains
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02g_commontasks.html">
       3.2.7. Common Tasks
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02h_exercises.html">
       3.2.8. Exercises
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="02j_resourcesAndSum.html">
       3.2.9. Summary and Resources
      </a>
     </li>
    </ul>
    <i class="fas fa-chevron-down">
    </i>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/03/02i_answers.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2021"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/LeDataSciFi/ledatascifi-2021/issues/new?title=Issue%20on%20page%20%2Fcontent/03/02i_answers.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/LeDataSciFi/ledatascifi-2021/edit/main/content/03/02i_answers.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/LeDataSciFi/ledatascifi-2021/main?urlpath=lab/tree/content/03/02i_answers.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/LeDataSciFi/ledatascifi-2021/blob/main/content/03/02i_answers.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-1">
   Part 1
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#some-answers">
     Some answers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-2">
   Part 2
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-3">
   Part 3
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="answers-to-pandas-exercises">
<h1>Answers to Pandas Exercises<a class="headerlink" href="#answers-to-pandas-exercises" title="Permalink to this headline">¶</a></h1>
<p>There are many ways to solve each of these!</p>
<p>Run each cell below in little incremental bits to really see how the code blocks work.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pandas_datareader</span> <span class="k">as</span> <span class="nn">pdr</span> <span class="c1"># IF NECESSARY, from terminal: pip install pandas_datareader </span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># you can specify start and end dates this way</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">27</span><span class="p">)</span>
<span class="n">macro_df</span> <span class="o">=</span> <span class="n">pdr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataReader</span><span class="p">([</span><span class="s1">&#39;GDP&#39;</span><span class="p">,</span><span class="s1">&#39;CPIAUCSL&#39;</span><span class="p">,</span><span class="s1">&#39;UNRATE&#39;</span><span class="p">],</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="part-1">
<h2>Part 1<a class="headerlink" href="#part-1" title="Permalink to this headline">¶</a></h2>
<p>During class, I used this dataframe to go over <a class="reference internal" href="02b_pandasVocab.html"><span class="doc std std-doc">Pandas vocab</span></a>, and we show how to</p>
<ul class="simple">
<li><p>access 1 variable (note: <code class="docutils literal notranslate"><span class="pre">pd</span></code> calls this a “series” object, which is a 1D object instead of a 2D object)</p></li>
<li><p>access multiple vars</p></li>
<li><p>access, print, and change column names</p></li>
<li><p>access, print, reset, and set the index</p></li>
</ul>
<p>Questions:</p>
<ul class="simple">
<li><p>Q0: Do each of the four new golden rules for initial data exploration, from the lecture.</p></li>
<li><p>Q1: What is the second series above?</p></li>
<li><p>Q2: What is the frequency of the series?</p></li>
<li><p>Q3: What is the average ANNUAL GDP, based on the data?</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># do your work here</span>
<span class="k">def</span> <span class="nf">insufficient_but_starting_eda</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">cat_vars_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : DATAFRAME</span>
<span class="sd">    cat_vars_list : LIST, optional</span>
<span class="sd">        A list of strings containing variable names in the dataframe</span>
<span class="sd">        for variables where you want to see the number of unique values</span>
<span class="sd">        and the 10 most common values. Likely used for categorical values.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None. It simply prints.</span>
<span class="sd">    </span>
<span class="sd">    Description</span>
<span class="sd">    -------    </span>
<span class="sd">    This function will print a MINIMUM amount of info about a new dataframe. </span>
<span class="sd">    </span>
<span class="sd">    You should ****look**** at all this output below and consider the data</span>
<span class="sd">    exploration and cleaning questions from </span>
<span class="sd">    https://ledatascifi.github.io/ledatascifi-2021/content/03/02e_eda_golden.html#member</span>
<span class="sd">    </span>
<span class="sd">    Also LOOK at more of the data manually. </span>
<span class="sd">    </span>
<span class="sd">    Then write up anything notable you observe.</span>
<span class="sd">    </span>
<span class="sd">    TIP: put this function in your codebook to reuse easily.</span>
<span class="sd">    </span>
<span class="sd">    PROTIP: Improve this function (better outputs, better formatting).</span>
<span class="sd">    </span>
<span class="sd">    FEATURE REQUEST: optionally print the nunique and top 10 values under the describe matrix</span>
<span class="sd">    </span>
<span class="sd">    FEATURE REQUEST: optionally print more stats (percentiles)</span>
<span class="sd">    </span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span>  <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(),</span>  <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The shape is: &quot;</span><span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Info:&quot;</span><span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">(),</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---&#39;</span><span class="p">)</span> <span class="c1"># memory usage, name, dtype, and # of non-null obs (--&gt; # of missing obs) per variable</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">(),</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---&#39;</span><span class="p">)</span> <span class="c1"># summary stats, and you can customize the list!</span>
    <span class="k">if</span> <span class="n">cat_vars_list</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">cat_vars_list</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="s2">&quot;has&quot;</span><span class="p">,</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">(),</span><span class="s2">&quot;values and its top 10 most common are:&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---&#39;</span><span class="p">)</span>
        
<span class="n">insufficient_but_starting_eda</span><span class="p">(</span><span class="n">macro_df</span><span class="p">,[</span><span class="s1">&#39;UNRATE&#39;</span><span class="p">])</span>  
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                  GDP  CPIAUCSL  UNRATE
DATE                                   
2017-01-01  19237.435   243.620     4.7
2017-02-01        NaN   243.872     4.6
2017-03-01        NaN   243.766     4.4
2017-04-01  19379.232   244.274     4.5
2017-05-01        NaN   244.069     4.4 
---
                  GDP  CPIAUCSL  UNRATE
DATE                                   
2020-09-01        NaN   260.149     7.8
2020-10-01  21479.529   260.462     6.9
2020-11-01        NaN   260.927     6.7
2020-12-01        NaN   261.560     6.7
2021-01-01        NaN   262.231     6.3 
---
Index([&#39;GDP&#39;, &#39;CPIAUCSL&#39;, &#39;UNRATE&#39;], dtype=&#39;object&#39;) 
---
The shape is:  (49, 3) 
---
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
DatetimeIndex: 49 entries, 2017-01-01 to 2021-01-01
Freq: MS
Data columns (total 3 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   GDP       16 non-null     float64
 1   CPIAUCSL  49 non-null     float64
 2   UNRATE    49 non-null     float64
dtypes: float64(3)
memory usage: 1.5 KB
Info: None 
---
                GDP    CPIAUCSL     UNRATE
count     16.000000   49.000000  49.000000
mean   20630.206313  252.878469   5.034694
std      862.963655    5.557894   2.524179
min    19237.435000  243.620000   3.500000
25%    19857.794250  248.721000   3.800000
50%    20826.288000  252.899000   4.000000
75%    21367.290000  257.387000   4.500000
max    21747.394000  262.231000  14.800000 
---
UNRATE has 22 values and its top 10 most common are:
3.8    7
4.0    5
3.6    5
4.4    4
3.7    4
3.5    3
4.1    3
4.2    2
4.3    2
6.7    2
Name: UNRATE, dtype: int64 
---
</pre></div>
</div>
</div>
</div>
<div class="section" id="some-answers">
<h3>Some answers<a class="headerlink" href="#some-answers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Q0: What have we learned about the data? Anything to keep track of? (GDP is annual, others are quarterly)</p></li>
<li><p>Q1: Inflation (CPI)</p></li>
<li><p>Q2: Quarterly, but GDP is only annual</p></li>
<li><p>Q3: 20,630 (trillion)</p></li>
</ul>
</div>
</div>
<div class="section" id="part-2">
<h2>Part 2<a class="headerlink" href="#part-2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Q4: Download the annual <em>real</em> gdp from 1960 to 2018 from FRED and compute the average annual percent change</p></li>
<li><p>Q5: Compute the average gdp percent change within <em>each decade</em></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># do your work here</span>

<span class="c1"># v1:</span>
<span class="n">part2_df</span> <span class="o">=</span> <span class="n">pdr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataReader</span><span class="p">([</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">],</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">,</span> <span class="mi">2018</span><span class="p">)</span> 
<span class="n">part2_df</span><span class="p">[</span><span class="s1">&#39;real_gdp_pct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">part2_df</span><span class="p">[</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
<span class="n">part2_df</span><span class="p">[</span><span class="s1">&#39;real_gdp_pct&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># prof notes: after students present, go through, bit by bit</span>
<span class="c1"># then add comments (a la psuedo), </span>
<span class="c1"># reiter access var: df[var], how methods apply to obj df[var].func()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.030766069353016783
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># v1.1: chain the last 2 lines together</span>
<span class="n">part2_df</span> <span class="o">=</span> <span class="n">pdr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataReader</span><span class="p">([</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">],</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">,</span> <span class="mi">2018</span><span class="p">)</span> 
<span class="n">part2_df</span><span class="p">[</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.030766069353016783
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># v1.2 that last line could be:    </span>
<span class="p">(</span><span class="n">part2_df</span>
     <span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>
     <span class="o">.</span><span class="n">mean</span><span class="p">()</span>
     
<span class="p">)</span>

<span class="c1"># explain reasons for chaining: readable, no temp objects</span>

<span class="c1"># breaking this up into 3 lines is silly but shows chaining over multiple lines</span>
<span class="c1"># how can we add the first line (the DL) into this? (next block)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>GDPCA    0.030766
dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># v2.0: chaining - but involves a lambda function work around</span>
<span class="c1"># don&#39;t cover until we go over lambdas</span>
<span class="p">(</span>
    <span class="c1"># DL data</span>
    <span class="n">pdr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataReader</span><span class="p">([</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">,</span><span class="s1">&#39;GDPA&#39;</span><span class="p">],</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">,</span> <span class="mi">2018</span><span class="p">)</span> 
    
    <span class="c1"># create the var</span>
    <span class="c1"># syntax is: .assign(newname = fcn(df(var)))</span>
    <span class="c1"># try this:</span>
    <span class="c1">#.assign(sillyvar=1)</span>
    <span class="c1"># but this df doesn&#39;t have a name! how do we access it?</span>
    <span class="c1"># trick: &quot;lambda&quot; function. </span>
    <span class="c1">#        here x is the object that assign is working on,</span>
    <span class="c1">#        meaning what ever is produced right before .assign</span>
    <span class="c1">#        which is just the **df** we DLed on the line above</span>
    <span class="c1">#</span>
    <span class="c1"># this is VERY COMMON in pandas chaining:</span>
    <span class="c1"># .assign(newvarname = lambda &lt;tempnameforpriorobj&gt;:  &lt;do stuff to tempnameforpriorobj&gt;   )       </span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">real_gdp_pct</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">())</span>
    
    <span class="c1"># grab the var and take its mean</span>
    <span class="p">[</span><span class="s1">&#39;real_gdp_pct&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.030766069353016783
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># v2.1: chaining - clean</span>
<span class="p">(</span>
    <span class="c1"># DL data</span>
    <span class="n">pdr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataReader</span><span class="p">([</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">,</span><span class="s1">&#39;GDPA&#39;</span><span class="p">],</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">,</span> <span class="mi">2018</span><span class="p">)</span> 
    <span class="c1"># create var</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">real_gdp_pct</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">())</span>
    <span class="c1"># get mean value</span>
    <span class="p">[</span><span class="s1">&#39;real_gdp_pct&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.030766069353016783
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Q5:</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># v2.1: chaining - clean</span>
<span class="p">(</span>
    <span class="c1"># DL data</span>
    <span class="n">pdr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataReader</span><span class="p">([</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">,</span><span class="s1">&#39;GDPA&#39;</span><span class="p">],</span> <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">,</span> <span class="mi">2018</span><span class="p">)</span> 
    <span class="c1"># create var pct change</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">real_gdp_pct</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;GDPCA&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">())</span>
    <span class="c1"># get the decade from the index (do this BIT BY BIT)</span>
    <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="c1"># turn it into variable</span>
        <span class="c1"># how to pull year out of date?</span>
        <span class="c1"># DATE is a datetime series. dt is a way to access properities of the date </span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">decade</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">DATE</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
    <span class="c1"># for each decade = groupby!</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;decade&#39;</span><span class="p">)</span>
    <span class="c1"># take mean</span>
    <span class="p">[</span><span class="s1">&#39;real_gdp_pct&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>decade
1960.0    0.047426
1970.0    0.032352
1980.0    0.031240
1990.0    0.032220
2000.0    0.019099
2010.0    0.023165
Name: real_gdp_pct, dtype: float64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="part-3">
<h2>Part 3<a class="headerlink" href="#part-3" title="Permalink to this headline">¶</a></h2>
<p>First, I’ll load January data on unemployment, the Case-Shiller housing index, and median household income in three states (CA/MI/PA).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># LOAD DATA AND CONVERT TO ANNUAL</span>

<span class="n">start</span> <span class="o">=</span> <span class="mi">1990</span> <span class="c1"># pandas datareader can infer these are years</span>
<span class="n">end</span> <span class="o">=</span> <span class="mi">2018</span>
<span class="n">macro_data</span> <span class="o">=</span> <span class="n">pdr</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">DataReader</span><span class="p">([</span><span class="s1">&#39;CAUR&#39;</span><span class="p">,</span><span class="s1">&#39;MIUR&#39;</span><span class="p">,</span><span class="s1">&#39;PAUR&#39;</span><span class="p">,</span> <span class="c1"># unemployment </span>
                                  <span class="s1">&#39;LXXRSA&#39;</span><span class="p">,</span><span class="s1">&#39;DEXRSA&#39;</span><span class="p">,</span><span class="s1">&#39;WDXRSA&#39;</span><span class="p">,</span> <span class="c1"># case shiller index in LA, Detroit, DC (no PA  available!)</span>
                                  <span class="s1">&#39;MEHOINUSCAA672N&#39;</span><span class="p">,</span><span class="s1">&#39;MEHOINUSMIA672N&#39;</span><span class="p">,</span><span class="s1">&#39;MEHOINUSPAA672N&#39;</span><span class="p">],</span> <span class="c1">#  </span>
                                 <span class="s1">&#39;fred&#39;</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
<span class="n">macro_data</span> <span class="o">=</span> <span class="n">macro_data</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span> <span class="c1"># get&#39;s the first observation for each variable in a given year</span>

<span class="c1"># CLEAN UP THE FORMATING SOMEWHAT</span>

<span class="n">macro_data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">macro_data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"> DATA BEFORE FORMATTING: </span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">macro_data</span><span class="p">[:</span><span class="mi">20</span><span class="p">])</span> <span class="c1"># see how the data looks now? ugly variable names, but its an annual dataset at least</span>
<span class="n">macro_data</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span><span class="s1">&#39;CA&#39;</span><span class="p">),(</span><span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span><span class="s1">&#39;MI&#39;</span><span class="p">),(</span><span class="s1">&#39;Unemployment&#39;</span><span class="p">,</span><span class="s1">&#39;PA&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;HouseIdx&#39;</span><span class="p">,</span><span class="s1">&#39;CA&#39;</span><span class="p">),(</span><span class="s1">&#39;HouseIdx&#39;</span><span class="p">,</span><span class="s1">&#39;MI&#39;</span><span class="p">),(</span><span class="s1">&#39;HouseIdx&#39;</span><span class="p">,</span><span class="s1">&#39;PA&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;MedIncome&#39;</span><span class="p">,</span><span class="s1">&#39;CA&#39;</span><span class="p">),(</span><span class="s1">&#39;MedIncome&#39;</span><span class="p">,</span><span class="s1">&#39;MI&#39;</span><span class="p">),(</span><span class="s1">&#39;MedIncome&#39;</span><span class="p">,</span><span class="s1">&#39;PA&#39;</span><span class="p">)</span>
    <span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2"> DATA AFTER FORMATTING: </span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">macro_data</span><span class="p">[:</span><span class="mi">20</span><span class="p">])</span> <span class="c1"># this is a dataset that is &quot;wide&quot;, and now </span>
                       <span class="c1"># the column variable names have 2 levels - var name, </span>
                       <span class="c1"># and unit/state that variable applies to</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> DATA BEFORE FORMATTING: 


      CAUR  MIUR  PAUR      LXXRSA      DEXRSA      WDXRSA  MEHOINUSCAA672N  \
DATE                                                                          
1990   5.2   7.8   5.1  100.471193         NaN   93.362855          63333.0   
1991   7.1   8.8   6.6   95.569015   58.420806   89.706871          61797.0   
1992   8.5   9.4   7.5   92.786926   59.748947   88.573807          62517.0   
1993   9.7   7.6   7.3   85.246295   61.564205   89.065118          59529.0   
1994   9.2   7.1   6.6   77.395052   64.526663   88.988467          60464.0   
1995   7.7   5.2   5.8   76.376389   68.973289   89.670303          61846.0   
1996   7.7   4.9   5.9   73.919989   73.582339   88.655369          63176.0   
1997   6.8   4.7   5.3   74.536884   79.347642   88.775224          63245.0   
1998   6.0   4.0   4.7   81.035037   85.183613   90.108149          64349.0   
1999   5.6   3.9   4.5   92.140086   92.433567   94.188054          67156.0   
2000   5.0   3.3   4.1  101.031209  100.145625  100.871832          69696.0   
2001   4.8   4.4   4.3  112.031476  107.327208  113.794411          68413.0   
2002   6.5   6.4   5.5  122.706507  111.468549  127.245701          67600.0   
2003   6.8   6.6   5.8  145.752401  115.704198  146.676851          68695.0   
2004   6.5   6.8   5.5  178.773752  119.772720  169.535303          66782.0   
2005   5.8   7.2   5.2  221.471364  123.264823  210.799937          67918.0   
2006   5.0   6.8   4.7  268.208844  126.872678  250.272528          70316.0   
2007   4.9   6.9   4.3  270.804920  118.163891  241.411126          68890.0   
2008   6.0   7.1   4.7  226.111966  100.378575  215.656581          67865.0   
2009   9.7  10.9   7.0  167.831216   77.690858  174.183926          67051.0   

      MEHOINUSMIA672N  MEHOINUSPAA672N  
DATE                                    
1990          56954.0          55181.0  
1991          58957.0          55744.0  
1992          57795.0          53523.0  
1993          57064.0          54151.0  
1994          60384.0          54877.0  
1995          60872.0          57693.0  
1996          63849.0          56807.0  
1997          61728.0          59776.0  
1998          65744.0          61333.0  
1999          70942.0          58119.0  
2000          67755.0          62789.0  
2001          65206.0          62966.0  
2002          60871.0          60562.0  
2003          62734.0          59823.0  
2004          57331.0          59841.0  
2005          60278.0          60760.0  
2006          61835.0          61619.0  
2007          61024.0          59870.0  
2008          59264.0          61185.0  
2009          54939.0          57540.0  


 DATA AFTER FORMATTING: 


     Unemployment               HouseIdx                         MedIncome  \
               CA    MI   PA          CA          MI          PA        CA   
DATE                                                                         
1990          5.2   7.8  5.1  100.471193         NaN   93.362855   63333.0   
1991          7.1   8.8  6.6   95.569015   58.420806   89.706871   61797.0   
1992          8.5   9.4  7.5   92.786926   59.748947   88.573807   62517.0   
1993          9.7   7.6  7.3   85.246295   61.564205   89.065118   59529.0   
1994          9.2   7.1  6.6   77.395052   64.526663   88.988467   60464.0   
1995          7.7   5.2  5.8   76.376389   68.973289   89.670303   61846.0   
1996          7.7   4.9  5.9   73.919989   73.582339   88.655369   63176.0   
1997          6.8   4.7  5.3   74.536884   79.347642   88.775224   63245.0   
1998          6.0   4.0  4.7   81.035037   85.183613   90.108149   64349.0   
1999          5.6   3.9  4.5   92.140086   92.433567   94.188054   67156.0   
2000          5.0   3.3  4.1  101.031209  100.145625  100.871832   69696.0   
2001          4.8   4.4  4.3  112.031476  107.327208  113.794411   68413.0   
2002          6.5   6.4  5.5  122.706507  111.468549  127.245701   67600.0   
2003          6.8   6.6  5.8  145.752401  115.704198  146.676851   68695.0   
2004          6.5   6.8  5.5  178.773752  119.772720  169.535303   66782.0   
2005          5.8   7.2  5.2  221.471364  123.264823  210.799937   67918.0   
2006          5.0   6.8  4.7  268.208844  126.872678  250.272528   70316.0   
2007          4.9   6.9  4.3  270.804920  118.163891  241.411126   68890.0   
2008          6.0   7.1  4.7  226.111966  100.378575  215.656581   67865.0   
2009          9.7  10.9  7.0  167.831216   77.690858  174.183926   67051.0   

                        
           MI       PA  
DATE                    
1990  56954.0  55181.0  
1991  58957.0  55744.0  
1992  57795.0  53523.0  
1993  57064.0  54151.0  
1994  60384.0  54877.0  
1995  60872.0  57693.0  
1996  63849.0  56807.0  
1997  61728.0  59776.0  
1998  65744.0  61333.0  
1999  70942.0  58119.0  
2000  67755.0  62789.0  
2001  65206.0  62966.0  
2002  60871.0  60562.0  
2003  62734.0  59823.0  
2004  57331.0  59841.0  
2005  60278.0  60760.0  
2006  61835.0  61619.0  
2007  61024.0  59870.0  
2008  59264.0  61185.0  
2009  54939.0  57540.0  
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Q6: for each decade and state, report the average annual CHANGE (level, not percent) in unemployment</p></li>
<li><p>Q7: for each decade and state, report the average annual PERCENT CHANGE in house prices and household income</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># do your work here: </span>

<span class="c1"># let&#39;s pseudocode</span>

<span class="c1"># q6 </span>
<span class="c1"># get decade variable</span>
<span class="c1"># get annual change/difference (level) in unemploy for each state</span>
<span class="c1"># average unemploy for each state within decade</span>

<span class="c1"># q7</span>
<span class="c1"># get decade variable</span>
<span class="c1"># get annual pct change in house price and income for each state</span>
<span class="c1"># average those for each state within decade</span>

<span class="c1"># HEY! those are similar - let&#39;s combine:</span>

<span class="c1"># get decade variable</span>
<span class="c1"># get annual change in unemploy for each state</span>
<span class="c1"># get annual pct change in house price and income for each state</span>
<span class="c1"># average unemploy for each state within decade</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.float_format&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>

<span class="p">(</span>
    <span class="c1"># reformat the data to tall:</span>
    <span class="n">macro_data</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span><span class="o">.</span><span class="n">swaplevel</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;level_0&#39;</span><span class="p">:</span><span class="s1">&#39;state&#39;</span><span class="p">})</span>
    
    <span class="c1"># create vars &lt;---- this is not even needed to explain this block!</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span>
            <span class="n">decade</span>          <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">10</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span>
            <span class="n">unemploy_diff</span>   <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;Unemployment&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">diff</span><span class="p">(),</span>
            <span class="n">HouseIdx_pctch</span>  <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;HouseIdx&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">(),</span>
            <span class="n">MedIncome_pctch</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;MedIncome&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span>    
    <span class="p">)</span>
    
    <span class="c1"># opt A for output:</span>
    <span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;decade&#39;</span><span class="p">,</span>
                 <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;state&#39;</span><span class="p">,</span>
                 <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;unemploy_diff&#39;</span><span class="p">,</span><span class="s1">&#39;HouseIdx_pctch&#39;</span><span class="p">,</span><span class="s1">&#39;MedIncome_pctch&#39;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="c1"># for more meaningful displays </span>
    
    <span class="c1"># opt B for output + formatting (here, as percentages)</span>
<span class="c1">#     .groupby([&#39;state&#39;,&#39;decade&#39;])</span>
<span class="c1">#     [[&#39;unemploy_diff&#39;,&#39;HouseIdx_pctch&#39;,&#39;MedIncome_pctch&#39;]].mean()</span>
<span class="c1">#     .multiply(100)</span>
<span class="c1">#     # note about this: unemp isn&#39;t a % diff, but a p.p </span>
<span class="c1">#     # so I make it explicit </span>
<span class="c1">#     .style.format({&#39;HouseIdx_pctch&#39;: &#39;{0:,.2f}%&#39;,</span>
<span class="c1">#                    &#39;MedIncome_pctch&#39;: &#39;{0:,.2f}%&#39;,</span>
<span class="c1">#                    &#39;unemploy_diff&#39;: &#39;{0:,.2f} p.p.&#39;}) </span>
    
<span class="p">)</span>    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">HouseIdx_pctch</th>
      <th colspan="3" halign="left">MedIncome_pctch</th>
      <th colspan="3" halign="left">unemploy_diff</th>
    </tr>
    <tr>
      <th>state</th>
      <th>CA</th>
      <th>MI</th>
      <th>PA</th>
      <th>CA</th>
      <th>MI</th>
      <th>PA</th>
      <th>CA</th>
      <th>MI</th>
      <th>PA</th>
    </tr>
    <tr>
      <th>decade</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1990</th>
      <td>-0.71</td>
      <td>-3.13</td>
      <td>-2.07</td>
      <td>0.69</td>
      <td>0.22</td>
      <td>-0.46</td>
      <td>4.44</td>
      <td>-5.00</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>2000</th>
      <td>7.52</td>
      <td>-1.20</td>
      <td>7.22</td>
      <td>0.01</td>
      <td>-2.42</td>
      <td>-0.03</td>
      <td>41.00</td>
      <td>70.00</td>
      <td>25.00</td>
    </tr>
    <tr>
      <th>2010</th>
      <td>5.84</td>
      <td>5.16</td>
      <td>2.83</td>
      <td>0.84</td>
      <td>1.42</td>
      <td>1.54</td>
      <td>-58.89</td>
      <td>-71.11</td>
      <td>-26.67</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/03"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Prof. Donald Bowen<br/>
        
            &copy; Copyright 2020.<br/>
          <div class="extra_footer">
            You're doing well, keep going!
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>